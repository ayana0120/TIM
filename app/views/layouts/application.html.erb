<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>TIM</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <%= favicon_link_tag('favicon.ico') %>
  </head>

  <body>
    <% if user_signed_in? %>

    <nav class="navbar navbar-expand-lg fixed-top bg-dark">
      <span class="navbar-brand ">
        <%= link_to user_path(current_user) do %>
          <span class="logo">
            <i class="fas fa-hourglass-half"></i>TIM
          </span>
        <% end %>
      </span>

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarhamburger" aria-controls="navbarhamburger" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="navbarhamburger">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <%= link_to user_path(current_user), class:"btn btn-link" do %>
              <div class="nav-link">
                <i class="fas fa-house-user"></i> マイページ
              </div>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to new_item_path, class:"btn btn-link" do %>
              <div class="nav-link">
                <i class="fas fa-edit"></i> アイテム追加
              </div>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to items_path, class:"btn btn-link" do %>
              <div class="nav-link">
                <i class="fas fa-align-justify"></i> アイテム一覧
              </div>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to genres_path, class:"btn btn-link" do %>
              <div class="nav-link">
                <i class="fas fa-book-open"></i> ジャンル
              </div>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to destroy_user_session_path, method: :delete, class:"btn btn-link" do %>
              <div class="nav-link">
                <i class="fas fa-sign-out-alt"></i> ログアウト
              </div>
            <% end %>
          </li>
        </ul>
      </div>
    </nav>

    <% else %>

    <nav class="navbar navbar-expand-lg fixed-top bg-dark">
      <span class="navbar-brand">
        <%= link_to root_path do %>
          <span class="logo">
            <i class="fas fa-hourglass-half"></i> TIM
          </span>
        <% end %>
      </span>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarhamburger" aria-controls="navbarhamburger" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="navbarhamburger">
        <ul class="navbar-nav">
          <li class="nav-item">
            <%= link_to new_user_registration_path, class:"btn btn-link" do %>
              <div class="nav-link active">
                <i class="far fa-address-card"></i> 新規登録
              </div>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to new_user_session_path, class:"btn btn-link" do %>
              <div class="nav-link">
                <i class="fas fa-sign-in-alt"></i> ログイン
              </div>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to about_path, class:"btn btn-link" do %>
              <div class="nav-link">
                <i class="fas fa-question-circle"></i> About
              </div>
            <% end %>
          </li>
        </ul>
      </div>
    </nav>

    <% end %>

    <main>
      <div class="container-fluid">
        <p class="notice"><%= notice %></p>
        <p class="alert"><%= alert %></p>
            <%= yield %>
      </div>
    </main>

    <footer class="bg-dark">
      <p class="text-right"> Copyright © TIM 2020</p>
    </footer>

  </body>
</html>